**1、什么是TCP/IP **

      如果要了解一个人，可以从他归属的集体聊起来。我们的HTTP协议就属于TCP/IP协议家族中的一员，了解HTTP协议再整个网络流程中的地位，也能更加充分的理解HTTP协议。

      要想了解什么是TCP/IP协议，就要知道为什么有这个协议。中国人和中国人说话，要遵循汉语的的语法结构，使用汉语的发音。当我们和外国人交流时，就要适用外国的语言了，遵循外国的语法机构和发音。其实这就是一种协议，只不过我们称之为语言。计算机再这方面体现的更为直观，两台机器之间该如何通信呢，就需要制定各种各样的协议了。例如：文件传输适用TCP协议。域名系统适用DNS协议。有了些协议的存在，各种数据流按照规则传输，计算机之间得意通信。

       TCP/IP协议是一个协议集合。大家叫的时候方便说，所以统称为TCP/IP。TCP/IP协议族中有一个重要的概念是分层，TCP/IP协议按照层次分为以下四层。应用层、传输层、网络层、数据链路层。为什么要分层？这就如同邓小平1978年的大包干，责任到人。一个层只负责一个层次的问题，如果出问题了，和其他的层次无关，只要维护这个层次也就好了。其实编程语言里也能体现这个分层理论，即封转性、隔离。这里不再延伸细谈。下面我是制作的一个简图。

![](https://images2015.cnblogs.com/blog/785686/201602/785686-20160201222741647-914447447.png)

下面是从网络上找到的TCP/IP通信数据流

![](https://images2015.cnblogs.com/blog/785686/201602/785686-20160201223112616-1937529463.jpg)



**2、HTTP 关系密切的协议 : IP、TCP 和 DNS**

**IP协议：**IP\(Internet protocol\),这里的IP不是值得我们通常所说的192.168.1.1.这个IP指的是一种协议，而后面的数字值得是IP地址。IP协议的作用在于把各种数据包准确无误的传递给对方，其中两个重要的条件是IP地址，和MAC地址（Media Access Control Address）。由于IP地址是稀有资源，不可能每个人都拥有一个IP地址，所以我们通常的IP地址是路由器给我们生成的IP地址，路由器里面会记录我们的MAC地址。而MAC地址是全球唯一的，除去人为因素外不可能重复。举一个现实生活中的例子，IP地址就如同是我们居住小区的地址，而MAC地址就是我们住的那栋楼那个房间那个人。关于MAC地址，如果我没讲清楚，[可点击连接，查看百度](http://baike.baidu.com/link?url=-z5R9CgQgbKA1Xho2ZBFcwX20tkmoiMAKSY9SyqCYZDTPD1b2x0uskUQd8wF3R0Dc6raIbRsHQJ31kORUQHofa)。以下内容摘抄自《图解HTTP》

> 使用 ARP 协议凭借 MAC 地址进行通信
>
>    IP 间的通信依赖 MAC 地址。在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。这时，会采用 ARP 协议（Address Resolution Protocol）。ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址

    感兴趣的可以参考[ARP协议（Address Resolution Protocol）](http://baike.baidu.com/link?url=dn_IR6z6UCn4ePGYTJ95rI4A8FvdSSbwqRlMBRclG0-8YemVpjcudMAdOgCTyPpIjmX_2viVaEi-wCEl88WBs6ILWGeZoloSLKG5BZ6WbikHxHBHzPdONo34sFZF5glme7Zd5rFiMKG0QKa60ubC2GVAD8rOFh2yiUrKe-xvXmW),题外话，从文档上来看，百度百科要比维基百科介绍的好的多。

　你向另外一台电脑发送一条信息，怎么再茫茫人海中瞬间找到对方，以下是图示：



![](https://images2015.cnblogs.com/blog/785686/201602/785686-20160201231521929-1635094019.png)



**TCP协议：**如果说IP协议是找到对方的详细地址。那么TCP协议就是把安全的把东西带给对方。各有分工，互不冲突。

      按层次分，TCP属于传输层，提供可靠的字节流服务。什么叫字节流服务呢？这个名字听起来让人不知所以然，下面听下我通俗的解释。所谓的字节流，其实就类似于信息切割。比如你是一个卖自行车的，你要去送货。安装好的自行车，太过庞大，又不稳定，容易损伤。不如直接把自行车拆开来，每个零件上都贴上收货人的姓名。最后送到后按照把属于同一个人的自行车再组装起来，这个拆解、运输、拼装的过程其实就是TCP字节流的过程。

     我们看下严谨的学术表达是怎样的：

> 所谓的字节流服务（Byte Stream Service）是指，为了方便传输，将大块数据分割成以报文段（segment）为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。一言以蔽之，TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议能够确认数据最终是否送达到对方。

     为了确保信息能够确保准确无误的到达，TCP采用了著名的三次握手策略（three-way handshaking）.下面我写一段对话来模拟下这三次握手。

![](https://images2015.cnblogs.com/blog/785686/201602/785686-20160201234441944-1271451860.png)

**DNS：**DNS\(Domain names System\) 和HTTP协议一样是处于应用层的服务，提供域名到IP地址之间的解析服务。

互联网之间是通过IP地址通信的，但是IP地址并不符合认得记忆习惯，人喜欢记忆有意义的字词。所以DNS服务就为了解决这个问题而生了。其实很好理解，形如我们电脑中host文件。

192.168.1.11       roverliang.com  

当我们访问roverliang.com 的时候，电脑便不会去外网服务器上查询了，直接去访问192.168.1.111。这是一个简单的域名劫持，足以说明DNS的涵义了。

下面是我们访问一个网页，各种协议在里面起的作用。

![](https://images2015.cnblogs.com/blog/785686/201602/785686-20160201235309225-1640442692.jpg)



